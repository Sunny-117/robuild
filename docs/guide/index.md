# ä»‹ç»

**robuild** æ˜¯é›¶é…ç½®çš„ TypeScript/ESM åŒ…æ„å»ºå™¨ã€‚å®ƒä»¥"é›¶é…ç½®ã€æé€Ÿã€å…¨èƒ½"ä¸ºè®¾è®¡ç†å¿µï¼Œè®©æ‚¨ä¸“æ³¨äºä»£ç æœ¬èº«ï¼Œè€Œä¸æ˜¯ç¹ççš„æ„å»ºé…ç½®ã€‚æ— è®ºæ˜¯ç®€å•çš„å·¥å…·åº“è¿˜æ˜¯å¤æ‚çš„ç»„ä»¶åº“ï¼Œrobuild éƒ½èƒ½ä»¥æœ€ç®€æ´çš„æ–¹å¼å®Œæˆæ„å»ºã€‚

## ä¸ºä»€ä¹ˆé€‰æ‹© robuildï¼Ÿ

robuild åŸºäº [Rolldown](https://rolldown.rs) å’Œ [Oxc](https://oxc.rs) æ„å»ºï¼Œè¿™æ˜¯ JavaScript ç”Ÿæ€ä¸­æœ€å‰æ²¿çš„ Rust å·¥å…·é“¾ã€‚ä¸å…¶ä»–æ„å»ºå·¥å…·ä¸åŒï¼Œrobuild æ·±åº¦æ•´åˆäº† Oxc çš„å®Œæ•´èƒ½åŠ›â€”â€”è§£æã€è½¬æ¢ã€å‹ç¼©ä¸€ä½“åŒ–ï¼Œå¸¦æ¥çœŸæ­£çš„æé€Ÿä½“éªŒã€‚

### robuild çš„ç‹¬ç‰¹ä¼˜åŠ¿

- **Oxc å…¨å®¶æ¡¶æ·±åº¦é›†æˆ**ï¼šrobuild æ˜¯å°‘æ•°å…¨é¢é‡‡ç”¨ Oxc å·¥å…·é“¾çš„æ„å»ºå™¨ã€‚ä» `oxc-parser` è§£æã€`oxc-transform` è½¬æ¢åˆ° `oxc-minify` å‹ç¼©ï¼Œå…¨é“¾è·¯ Rust åŠ é€Ÿï¼Œæ„å»ºé€Ÿåº¦é¥é¥é¢†å…ˆã€‚
- **åŒé…ç½®é£æ ¼å…¼å®¹**ï¼šåŒæ—¶æ”¯æŒ unbuild é£æ ¼çš„ `entries` æ•°ç»„é…ç½®å’Œ tsup é£æ ¼çš„æ‰å¹³é…ç½®ï¼Œæ— è®ºæ‚¨ä»å“ªä¸ªå·¥å…·è¿ç§»ï¼Œéƒ½èƒ½æ— ç¼è¡”æ¥ã€‚
- **Transform æ¨¡å¼**ï¼šç‹¬æœ‰çš„ Transform æ¨¡å¼ï¼ŒåŸºäº Oxc é€æ–‡ä»¶è½¬æ¢ï¼Œä¿ç•™ç›®å½•ç»“æ„ï¼Œé€‚åˆéœ€è¦ä¿æŒæ¨¡å—è¾¹ç•Œçš„åœºæ™¯ã€‚
- **è‡ªåŠ¨ Exports ç”Ÿæˆ**ï¼šæ™ºèƒ½åˆ†ææ„å»ºäº§ç‰©ï¼Œè‡ªåŠ¨ç”Ÿæˆç¬¦åˆè§„èŒƒçš„ `package.json` exports å­—æ®µï¼Œå‘Šåˆ«æ‰‹åŠ¨ç»´æŠ¤çš„çƒ¦æ¼ã€‚
- **Stub å¼€å‘æ¨¡å¼**ï¼šå¼€å‘æ—¶ç›´æ¥é“¾æ¥æºç ï¼Œæ— éœ€ç­‰å¾…æ„å»ºï¼Œé…åˆ Watch æ¨¡å¼å®ç°æè‡´çš„å¼€å‘ä½“éªŒã€‚

## æŠ€æœ¯æ¶æ„

robuild çš„æŠ€æœ¯é€‰å‹è¿½æ±‚æè‡´æ€§èƒ½ï¼š

```
æºç  â†’ oxc-parser è§£æ â†’ oxc-transform è½¬æ¢ â†’ rolldown æ‰“åŒ… â†’ oxc-minify å‹ç¼© â†’ äº§ç‰©
         (Rust)           (Rust)              (Rust)           (Rust)
```

å…¨é“¾è·¯ Rust å·¥å…·é“¾ï¼Œæ„å»ºé€Ÿåº¦æ¯”ä¼ ç»Ÿ JavaScript å·¥å…·é“¾å¿« 10-100 å€ã€‚

## å®ƒèƒ½æ„å»ºä»€ä¹ˆï¼Ÿ

robuild ä¸“ä¸ºç°ä»£åº“å¼€å‘è®¾è®¡ï¼Œè¦†ç›–æ‰€æœ‰å¸¸è§åœºæ™¯ï¼š

- **TypeScript & JavaScript**ï¼šåŸç”Ÿæ”¯æŒ `.ts`ã€`.tsx`ã€`.js`ã€`.jsx`ï¼Œè‡ªåŠ¨å¤„ç†æœ€æ–°è¯­æ³•ç‰¹æ€§
- **ç±»å‹å£°æ˜æ–‡ä»¶**ï¼šåŸºäº `rolldown-plugin-dts` è‡ªåŠ¨ç”Ÿæˆ `.d.ts`ã€`.d.mts` å£°æ˜æ–‡ä»¶
- **å¤šæ ¼å¼è¾“å‡º**ï¼šæ”¯æŒ `esm`ã€`cjs`ã€`iife` æ ¼å¼ï¼Œä¸€æ¬¡æ„å»ºè¦†ç›–æ‰€æœ‰è¿è¡Œç¯å¢ƒ
- **èµ„æºæ–‡ä»¶**ï¼šæ”¯æŒ JSONã€WASM ç­‰èµ„æºæ–‡ä»¶çš„å¤„ç†å’Œå†…è”

## æ ¸å¿ƒç‰¹æ€§

### âš¡ æé€Ÿæ„å»º

åŸºäº Rust çš„å…¨é“¾è·¯å·¥å…·é“¾ï¼Œæ„å»ºé€Ÿåº¦æ¯” Babel/Rollup ç»„åˆå¿«ä¸€ä¸ªæ•°é‡çº§ï¼š

- oxc-parserï¼šè§£æé€Ÿåº¦æ¯” Babel å¿« 20 å€ä»¥ä¸Š
- oxc-transformï¼šè½¬æ¢é€Ÿåº¦æ¯” SWC æ›´å¿«
- rolldownï¼šæ‰“åŒ…é€Ÿåº¦æ¯” Rollup å¿« 10 å€ä»¥ä¸Š
- oxc-minifyï¼šå‹ç¼©é€Ÿåº¦æ¯” Terser å¿« 50 å€ä»¥ä¸Š

### ğŸ¯ çœŸæ­£çš„é›¶é…ç½®

```bash
# å°±è¿™ä¹ˆç®€å•ï¼Œè‡ªåŠ¨æ£€æµ‹ src/index.ts
npx robuild
```

- è‡ªåŠ¨æ£€æµ‹é¡¹ç›®å…¥å£å’Œä¾èµ–
- æ™ºèƒ½æ¨æ–­è¾“å‡ºæ ¼å¼å’Œç›®æ ‡å¹³å°
- åˆç†çš„é»˜è®¤é…ç½®è¦†ç›– 90% åœºæ™¯

### ğŸ“¦ åŒæ¨¡å¼æ„å»º

**Bundle æ¨¡å¼** - æ‰“åŒ…æˆå•æ–‡ä»¶ï¼š
```ts
{ type: 'bundle', input: './src/index.ts' }
```

**Transform æ¨¡å¼** - ä¿ç•™ç›®å½•ç»“æ„ï¼š
```ts
{ type: 'transform', input: './src' }
```

### ğŸ”„ åŒé…ç½®é£æ ¼

**unbuild é£æ ¼**ï¼ˆentries æ•°ç»„ï¼‰ï¼š
```ts
export default defineConfig({
  entries: [
    { type: 'bundle', input: './src/index.ts', format: ['esm', 'cjs'] }
  ]
})
```

**tsup é£æ ¼**ï¼ˆæ‰å¹³é…ç½®ï¼‰ï¼š
```ts
export default defineConfig({
  entry: ['./src/index.ts'],
  format: ['esm', 'cjs'],
  dts: true
})
```

### ğŸ“¤ è‡ªåŠ¨ Exports ç”Ÿæˆ

```ts
{
  generateExports: true,
  exports: { enabled: true, autoUpdate: true }
}
```

è‡ªåŠ¨ç”Ÿæˆè§„èŒƒçš„ package.json exportsï¼š
```json
{
  "exports": {
    ".": {
      "types": "./dist/index.d.mts",
      "import": "./dist/index.mjs",
      "require": "./dist/index.cjs"
    }
  }
}
```

### ğŸš€ Stub å¼€å‘æ¨¡å¼

å¼€å‘æ—¶ç›´æ¥é“¾æ¥æºç ï¼Œé›¶ç­‰å¾…ï¼š
```bash
npx robuild --stub
```

### ğŸ‘€ Watch æ¨¡å¼

æ–‡ä»¶å˜åŒ–è‡ªåŠ¨é‡å»ºï¼Œå¼€å‘ä½“éªŒæ‹‰æ»¡ï¼š
```bash
npx robuild --watch
```

## ä¸å…¶ä»–å·¥å…·å¯¹æ¯”

| ç‰¹æ€§ | robuild | tsdown | unbuild | tsup |
|------|---------|--------|---------|------|
| é›¶é…ç½® | âœ… | âœ… | âœ… | âœ… |
| Oxc å…¨é“¾è·¯ | âœ… | âŒ | âŒ | âŒ |
| Rust æ‰“åŒ…å™¨ | âœ… Rolldown | âœ… Rolldown | âŒ Rollup | âŒ esbuild |
| Transform æ¨¡å¼ | âœ… | âŒ | âœ… | âŒ |
| åŒé…ç½®é£æ ¼ | âœ… | âŒ | âŒ | âŒ |
| Stub æ¨¡å¼ | âœ… | âŒ | âœ… | âŒ |
| è‡ªåŠ¨ Exports | âœ… | âœ… | âŒ | âŒ |
| æ„å»ºé€Ÿåº¦ | âš¡âš¡âš¡ | âš¡âš¡âš¡ | âš¡ | âš¡âš¡ |

## å¿«é€Ÿä¸Šæ‰‹

å‡†å¤‡å¥½äº†å—ï¼Ÿä¸‰æ­¥å¼€å§‹ï¼š

```bash
# 1. å®‰è£…
pnpm add -D robuild

# 2. æ„å»º
npx robuild

# 3. å®Œæˆï¼
```

æŸ¥é˜… [å¿«é€Ÿå¼€å§‹](./getting-started.md) äº†è§£æ›´å¤šã€‚

## è‡´è°¢

robuild çš„è¯ç”Ÿç¦»ä¸å¼€å¼€æºç¤¾åŒºçš„è´¡çŒ®ï¼š

- **[Rolldown](https://rolldown.rs)**ï¼šé«˜æ€§èƒ½ Rust æ‰“åŒ…å™¨ï¼Œrobuild çš„æ ¸å¿ƒå¼•æ“
- **[Oxc](https://oxc.rs)**ï¼šæé€Ÿ JavaScript å·¥å…·é“¾ï¼Œæä¾›è§£æã€è½¬æ¢ã€å‹ç¼©èƒ½åŠ›
- **[tsup](https://github.com/egoist/tsup)**ï¼šä¸ºé›¶é…ç½®æ„å»ºä½“éªŒå’Œ CLI è®¾è®¡æä¾›çµæ„Ÿ
- **[unbuild](https://github.com/unjs/unbuild)**ï¼šä¸º entries é…ç½®é£æ ¼å’Œ Stub æ¨¡å¼æä¾›å¯å‘
- **[rolldown-plugin-dts](https://github.com/nicepkg/rolldown-plugin-dts)**ï¼šå¼ºå¤§çš„ç±»å‹å£°æ˜ç”Ÿæˆæ’ä»¶

## ä¸‹ä¸€æ­¥

- [å¿«é€Ÿå¼€å§‹](./getting-started.md) - å®‰è£…å’ŒåŸºæœ¬ä½¿ç”¨
- [CLI ä½¿ç”¨](./cli.md) - å‘½ä»¤è¡Œå·¥å…·è¯¦è§£
- [é…ç½®](./configuration.md) - é…ç½®æ–‡ä»¶é€‰é¡¹
- [æ„å»ºæ¨¡å¼](./build-modes.md) - Bundle å’Œ Transform æ¨¡å¼è¯¦è§£
- [Exports ç”Ÿæˆ](./exports-generation.md) - è‡ªåŠ¨ç”Ÿæˆ package.json exports
